<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
<toolkitModel xmlns="http://www.ibm.com/xmlns/prod/streams/spl/toolkit" productVersion="4.2.1.1" xmlns:common="http://www.ibm.com/xmlns/prod/streams/spl/common" xmlns:ti="http://www.ibm.com/xmlns/prod/streams/spl/toolkitInfo" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

  <toolkit name="iot4i-shield-toolkit" requiredProductVersion="4.2.1.1" version="1.0.0">
    <description/>
    <uriTable>
      <uri index="7" value="com.ibm.iot4i.hazards.IoTP/Sink.spl"/>
      <uri index="14" value="com.ibm.iot4i.events.IoTP/native.function/javaFunction.xml"/>
      <uri index="3" value="com.ibm.iot4i.events.MH/AnnotatedSource.spl"/>
      <uri index="1" value="com.ibm.iot4i.events.IoTP/CheckActivation.spl"/>
      <uri index="4" value="com.ibm.iot4i.events.MH/CheckActivation.spl"/>
      <uri index="5" value="com.ibm.iot4i.events.MH/Source.spl"/>
      <uri index="6" value="com.ibm.iot4i.hazards.common/PrepareHazards.spl"/>
      <uri index="9" value="com.ibm.iot4i.hazards.MH/Sink.spl"/>
      <uri index="8" value="com.ibm.iot4i.hazards.IoTP/SubmitHazards.spl"/>
      <uri index="12" value="com.ibm.iot4i.common/native.function/javaFunction.xml"/>
      <uri index="2" value="com.ibm.iot4i.events.IoTP/Source.spl"/>
      <uri index="10" value="com.ibm.iot4i.hazards.MH/SubmitHazards.spl"/>
      <uri index="15" value="com.ibm.iot4i.events.MH/native.function/javaFunction.xml"/>
      <uri index="13" value="com.ibm.iot4i.hazards.common/native.function/javaFunction.xml"/>
      <uri index="16" value="com.ibm.iot4i.events.common/CheckActivationOp"/>
      <uri index="11" value="com.ibm.iot4i.models/Types.spl"/>
    </uriTable>
    <namespace name="com.ibm.iot4i.common">
      <function modelUriIndex="12" name="getKafkaPropertiesFileName" native="true" public="true" returnType="T" uriIndex="0">
        <prototype>&lt;string T&gt; public T getKafkaPropertiesFileName(T dir, T kafkaBrokerSasl, T username, T password, T groupId, T clientId, T securityProtocol, T saslMechanism, T sslProtocol, T sslEnabledProtocol, T sslTrustStoreType, T sslEndpointIdAlgorithm, T retriesNumber)</prototype>
        <parameter name="dir" type="T"/>
        <parameter name="kafkaBrokerSasl" type="T"/>
        <parameter name="username" type="T"/>
        <parameter name="password" type="T"/>
        <parameter name="groupId" type="T"/>
        <parameter name="clientId" type="T"/>
        <parameter name="securityProtocol" type="T"/>
        <parameter name="saslMechanism" type="T"/>
        <parameter name="sslProtocol" type="T"/>
        <parameter name="sslEnabledProtocol" type="T"/>
        <parameter name="sslTrustStoreType" type="T"/>
        <parameter name="sslEndpointIdAlgorithm" type="T"/>
        <parameter name="retriesNumber" type="T"/>
      </function>
    </namespace>
    <namespace name="com.ibm.iot4i.hazards.common">
      <compositeOp column="18" line="5" name="PrepareHazards" potentialMain="false" public="true" uriIndex="6">
        <parameter metaType="Expression" name="SHIELD_ID" optional="false" type="&lt;rstring>"/>
        <inputPort name="HazardStream" portIndex="0" type="stream&lt;Hazard>"/>
        <outputPort name="PreparedHazardStream" portIndex="0" type="stream&lt;rstring data>"/>
      </compositeOp>
      <function modelUriIndex="13" name="isHttps" native="true" public="true" returnType="boolean" uriIndex="0">
        <prototype>&lt;string T&gt; public boolean isHttps(T apiURL)</prototype>
        <parameter name="apiURL" type="T"/>
      </function>
    </namespace>
    <namespace name="com.ibm.iot4i.events.IoTP">
      <compositeOp column="18" line="6" name="CheckActivation" potentialMain="false" public="true" uriIndex="1">
        <parameter metaType="Expression" name="ORG" optional="false" type="&lt;rstring>"/>
        <parameter metaType="Expression" name="AUTH_KEY" optional="false" type="&lt;rstring>"/>
        <parameter metaType="Expression" name="AUTH_TOKEN" optional="false" type="&lt;rstring>"/>
        <parameter metaType="Expression" name="QOS" optional="false" type="&lt;int32>"/>
        <parameter defaultValue="(rstring)jobID() + &quot;_notification_activation&quot;" metaType="Expression" name="NOTIFICATION_APP_ID" optional="true" type="&lt;rstring>"/>
        <parameter defaultValue="&quot;iot-2/type/IoT4i_userActivationChange/id/+/evt/notification/fmt/json&quot;" metaType="Expression" name="NOTIFICATION_TOPIC" optional="true" type="&lt;rstring>"/>
        <parameter metaType="Expression" name="API_URL" optional="false" type="&lt;rstring>"/>
        <parameter metaType="Expression" name="API_TOKEN" optional="false" type="&lt;rstring>"/>
        <parameter metaType="Expression" name="TENANT_ID" optional="false" type="&lt;rstring>"/>
        <parameter metaType="Expression" name="SHIELD_ID" optional="false" type="&lt;rstring>"/>
        <inputPort name="SourceStream" portIndex="0" type="stream&lt;rstring userId, rstring key, rstring message>"/>
        <outputPort name="ValidatedStream" portIndex="0" type="stream&lt;rstring userId, rstring key, rstring message>"/>
      </compositeOp>
      <compositeOp column="18" line="5" name="Source" potentialMain="false" public="true" uriIndex="2">
        <parameter metaType="Expression" name="ORG" optional="false" type="&lt;rstring>"/>
        <parameter metaType="Expression" name="AUTH_KEY" optional="false" type="&lt;rstring>"/>
        <parameter metaType="Expression" name="AUTH_TOKEN" optional="false" type="&lt;rstring>"/>
        <parameter metaType="Expression" name="QOS" optional="false" type="&lt;int32>"/>
        <parameter metaType="Expression" name="SOURCE_CLIENT_ID" optional="false" type="&lt;rstring>"/>
        <parameter metaType="Expression" name="SOURCE_TOPIC" optional="false" type="&lt;rstring>"/>
        <parameter defaultValue="&quot;topic&quot;" metaType="Expression" name="TOPIC_ATTR_NAME" optional="true" type="&lt;rstring>"/>
        <parameter defaultValue="&quot;payload&quot;" metaType="Expression" name="DATA_ATTR_NAME" optional="true" type="&lt;rstring>"/>
        <parameter defaultValue="&quot;streamsx.iotf.123&quot;" metaType="Expression" name="TRUST_STORE_PASSWORD" optional="true" type="&lt;rstring>"/>
        <parameter defaultValue="&quot;ssl://&quot;" metaType="Expression" name="PROTOCOL" optional="true" type="&lt;rstring>"/>
        <parameter defaultValue="&quot;.messaging.internetofthings.ibmcloud.com&quot;" metaType="Expression" name="HOST" optional="true" type="&lt;rstring>"/>
        <parameter defaultValue="getThisToolkitDir() + &quot;/opt/messaging.ts&quot;" metaType="Expression" name="TRUST_STORE" optional="true" type="&lt;rstring>"/>
        <outputPort name="SourceStream" portIndex="0" type="stream&lt;rstring key, rstring message>"/>
      </compositeOp>
      <function modelUriIndex="14" name="getJsonStringKey" native="true" public="true" returnType="T" uriIndex="0">
        <description>get a kafka key from topic</description>
        <prototype>&lt;string T&gt; public T getJsonStringKey(T orgId, T topic)</prototype>
        <parameter name="orgId" type="T"/>
        <parameter name="topic" type="T"/>
      </function>
    </namespace>
    <namespace name="com.ibm.iot4i.models">
      <type column="6" line="4" name="Hazard" static="true" type="rstring userId, rstring rawEvents, rstring actionParams" uriIndex="11"/>
    </namespace>
    <namespace name="com.ibm.iot4i.hazards.MH">
      <compositeOp column="18" line="8" name="Sink" potentialMain="false" public="true" uriIndex="9">
        <parameter metaType="Expression" name="KAFKA_BROKERS_SASL" optional="false" type="&lt;rstring>"/>
        <parameter metaType="Expression" name="USERNAME" optional="false" type="&lt;rstring>"/>
        <parameter metaType="Expression" name="PASSWORD" optional="false" type="&lt;rstring>"/>
        <parameter metaType="Expression" name="GROUP_ID" optional="false" type="&lt;rstring>"/>
        <parameter metaType="Expression" name="CLIENT_ID" optional="false" type="&lt;rstring>"/>
        <parameter defaultValue="&quot;30&quot;" metaType="Expression" name="RETRIES" optional="true" type="&lt;rstring>"/>
        <parameter defaultValue="&quot;SASL_SSL&quot;" metaType="Expression" name="SECURITY_PROTOCOL" optional="true" type="&lt;rstring>"/>
        <parameter defaultValue="&quot;PLAIN&quot;" metaType="Expression" name="SASL_MECHANISM" optional="true" type="&lt;rstring>"/>
        <parameter defaultValue="&quot;TLSv1.2&quot;" metaType="Expression" name="SSL_PROTOCOL" optional="true" type="&lt;rstring>"/>
        <parameter defaultValue="&quot;TLSv1.2&quot;" metaType="Expression" name="SSL_ENABLED_PROTOCOLS" optional="true" type="&lt;rstring>"/>
        <parameter defaultValue="&quot;JKS&quot;" metaType="Expression" name="SSL_TRUST_STORE_TYPE" optional="true" type="&lt;rstring>"/>
        <parameter defaultValue="&quot;HTTPS&quot;" metaType="Expression" name="SSL_ENDPOINT_IDENTIFICATION_ALGORITHM" optional="true" type="&lt;rstring>"/>
        <inputPort name="KafkaSinkStream" portIndex="0" type="stream&lt;rstring topic, rstring key, rstring message>"/>
      </compositeOp>
      <compositeOp column="18" line="6" name="SubmitHazards" potentialMain="false" public="true" uriIndex="10">
        <parameter metaType="Expression" name="KAFKA_BROKERS_SASL" optional="false" type="&lt;rstring>"/>
        <parameter metaType="Expression" name="USERNAME" optional="false" type="&lt;rstring>"/>
        <parameter metaType="Expression" name="PASSWORD" optional="false" type="&lt;rstring>"/>
        <parameter metaType="Expression" name="TOPIC" optional="false" type="&lt;rstring>"/>
        <parameter defaultValue="&quot;{\&quot;timestamp:\&quot;&quot; + (rstring)getTimestampInSecs() + &quot;\&quot;}&quot;" metaType="Expression" name="KEY" optional="true" type="&lt;rstring>"/>
        <parameter metaType="Expression" name="SHIELD_ID" optional="false" type="&lt;rstring>"/>
        <inputPort name="HazardStream" portIndex="0" type="stream&lt;Hazard>"/>
      </compositeOp>
    </namespace>
    <namespace name="com.ibm.iot4i.events.MH">
      <compositeOp column="18" line="3" name="AnnotatedSource" potentialMain="false" public="true" uriIndex="3">
        <parameter metaType="Expression" name="KAFKA_BROKERS_SASL" optional="false" type="&lt;rstring>"/>
        <parameter metaType="Expression" name="USERNAME" optional="false" type="&lt;rstring>"/>
        <parameter metaType="Expression" name="PASSWORD" optional="false" type="&lt;rstring>"/>
        <parameter metaType="Expression" name="TOPIC" optional="false" type="&lt;rstring>"/>
        <outputPort name="AnnotatedStream" portIndex="0" type="stream&lt;rstring userId, rstring key, rstring message>"/>
      </compositeOp>
      <compositeOp column="18" line="5" name="CheckActivation" potentialMain="false" public="true" uriIndex="4">
        <parameter metaType="Expression" name="KAFKA_BROKERS_SASL" optional="false" type="&lt;rstring>"/>
        <parameter metaType="Expression" name="USERNAME" optional="false" type="&lt;rstring>"/>
        <parameter metaType="Expression" name="PASSWORD" optional="false" type="&lt;rstring>"/>
        <parameter metaType="Expression" name="TOPIC" optional="false" type="&lt;rstring>"/>
        <parameter metaType="Expression" name="API_URL" optional="false" type="&lt;rstring>"/>
        <parameter metaType="Expression" name="API_TOKEN" optional="false" type="&lt;rstring>"/>
        <parameter metaType="Expression" name="TENANT_ID" optional="false" type="&lt;rstring>"/>
        <parameter metaType="Expression" name="SHIELD_ID" optional="false" type="&lt;rstring>"/>
        <inputPort name="SourceStream" portIndex="0" type="stream&lt;rstring userId, rstring key, rstring message>"/>
        <outputPort name="ValidatedStream" portIndex="0" type="stream&lt;rstring userId, rstring key, rstring message>"/>
      </compositeOp>
      <compositeOp column="18" line="6" name="Source" potentialMain="false" public="true" uriIndex="5">
        <parameter metaType="Expression" name="KAFKA_BROKERS_SASL" optional="false" type="&lt;rstring>"/>
        <parameter metaType="Expression" name="USERNAME" optional="false" type="&lt;rstring>"/>
        <parameter metaType="Expression" name="PASSWORD" optional="false" type="&lt;rstring>"/>
        <parameter metaType="Expression" name="TOPIC" optional="false" type="&lt;rstring>"/>
        <parameter metaType="Expression" name="GROUP_ID" optional="false" type="&lt;rstring>"/>
        <parameter metaType="Expression" name="CLIENT_ID" optional="false" type="&lt;rstring>"/>
        <parameter defaultValue="&quot;30&quot;" metaType="Expression" name="RETRIES" optional="true" type="&lt;rstring>"/>
        <parameter defaultValue="&quot;SASL_SSL&quot;" metaType="Expression" name="SECURITY_PROTOCOL" optional="true" type="&lt;rstring>"/>
        <parameter defaultValue="&quot;PLAIN&quot;" metaType="Expression" name="SASL_MECHANISM" optional="true" type="&lt;rstring>"/>
        <parameter defaultValue="&quot;TLSv1.2&quot;" metaType="Expression" name="SSL_PROTOCOL" optional="true" type="&lt;rstring>"/>
        <parameter defaultValue="&quot;TLSv1.2&quot;" metaType="Expression" name="SSL_ENABLED_PROTOCOLS" optional="true" type="&lt;rstring>"/>
        <parameter defaultValue="&quot;JKS&quot;" metaType="Expression" name="SSL_TRUST_STORE_TYPE" optional="true" type="&lt;rstring>"/>
        <parameter defaultValue="&quot;HTTPS&quot;" metaType="Expression" name="SSL_ENDPOINT_IDENTIFICATION_ALGORITHM" optional="true" type="&lt;rstring>"/>
        <outputPort name="SourceStream" portIndex="0" type="stream&lt;rstring key, rstring message>"/>
      </compositeOp>
      <function modelUriIndex="15" name="getUserId" native="true" public="true" returnType="T" uriIndex="0">
        <prototype>&lt;string T&gt; public T getUserId(T message)</prototype>
        <parameter name="message" type="T"/>
      </function>
    </namespace>
    <namespace name="com.ibm.iot4i.events.common">
      <primitiveOp language="Java" modelUriIndex="16" name="CheckActivationOp" public="true">
        <description>Java Operator CheckActivationOp</description>
        <parameter expressionMode="Constant" name="vmArg" optional="true" type="rstring">
          <description>
Specifies command-line arguments that are passed to the Java virtual machine that the operator runs within.
</description>
        </parameter>
        <parameter cardinality="1" expressionMode="AttributeFree" name="apiToken" optional="false" type="rstring">
          <description/>
        </parameter>
        <parameter cardinality="1" expressionMode="AttributeFree" name="apiURL" optional="false" type="rstring">
          <description/>
        </parameter>
        <parameter cardinality="1" expressionMode="AttributeFree" name="shieldId" optional="false" type="rstring">
          <description/>
        </parameter>
        <parameter cardinality="1" expressionMode="AttributeFree" name="tenantId" optional="false" type="rstring">
          <description/>
        </parameter>
        <inputPort maxNumPorts="1" minNumPorts="1" optional="false" windowPunctInputMode="Oblivious">
          <description>Port that ingests tuples</description>
          <windowPolicy>NonWindowed</windowPolicy>
        </inputPort>
        <inputPort minNumPorts="0" optional="true" windowPunctInputMode="Oblivious">
          <description>Optional input ports</description>
          <windowPolicy>NonWindowed</windowPolicy>
        </inputPort>
        <outputPort expressionMode="Nonexistent" maxNumPorts="1" minNumPorts="1" optional="false" windowPunctOutputMode="Generating">
          <description>Port that produces tuples</description>
        </outputPort>
        <outputPort expressionMode="Nonexistent" minNumPorts="0" optional="true" windowPunctOutputMode="Generating">
          <description>Optional output ports</description>
        </outputPort>
      </primitiveOp>
    </namespace>
    <namespace name="com.ibm.iot4i.hazards.IoTP">
      <compositeOp column="18" line="7" name="Sink" potentialMain="false" public="true" uriIndex="7">
        <parameter metaType="Expression" name="ORG" optional="false" type="&lt;rstring>"/>
        <parameter metaType="Expression" name="AUTH_KEY" optional="false" type="&lt;rstring>"/>
        <parameter metaType="Expression" name="AUTH_TOKEN" optional="false" type="&lt;rstring>"/>
        <parameter metaType="Expression" name="QOS" optional="false" type="&lt;int32>"/>
        <parameter metaType="Expression" name="SINK_CLIENT_ID" optional="false" type="&lt;rstring>"/>
        <parameter metaType="Expression" name="SINK_TOPIC" optional="false" type="&lt;rstring>"/>
        <parameter defaultValue="&quot;ssl://&quot;" metaType="Expression" name="PROTOCOL" optional="true" type="&lt;rstring>"/>
        <parameter defaultValue="&quot;.messaging.internetofthings.ibmcloud.com&quot;" metaType="Expression" name="HOST" optional="true" type="&lt;rstring>"/>
        <parameter defaultValue="&quot;streamsx.iotf.123&quot;" metaType="Expression" name="TRUST_STORE_PASSWORD" optional="true" type="&lt;rstring>"/>
        <parameter defaultValue="getThisToolkitDir() + &quot;/opt/messaging.ts&quot;" metaType="Expression" name="TRUST_STORE" optional="true" type="&lt;rstring>"/>
        <inputPort name="PreparedHazardStream" portIndex="0" type="stream&lt;rstring data>"/>
      </compositeOp>
      <compositeOp column="18" line="6" name="SubmitHazards" potentialMain="false" public="true" uriIndex="8">
        <parameter metaType="Expression" name="ORG" optional="false" type="&lt;rstring>"/>
        <parameter metaType="Expression" name="AUTH_KEY" optional="false" type="&lt;rstring>"/>
        <parameter metaType="Expression" name="AUTH_TOKEN" optional="false" type="&lt;rstring>"/>
        <parameter metaType="Expression" name="QOS" optional="false" type="&lt;int32>"/>
        <parameter defaultValue="(rstring)jobID() + &quot;_cmd&quot;" metaType="Expression" name="SINK_APP_ID" optional="true" type="&lt;rstring>"/>
        <parameter defaultValue="&quot;iot-2/type/hazard/id/shield/cmd/hazardDetected/fmt/json&quot;" metaType="Expression" name="SINK_TOPIC" optional="true" type="&lt;rstring>"/>
        <parameter metaType="Expression" name="SHIELD_ID" optional="false" type="&lt;rstring>"/>
        <parameter metaType="Expression" name="API_URL" optional="false" type="&lt;rstring>"/>
        <parameter metaType="Expression" name="API_TOKEN" optional="false" type="&lt;rstring>"/>
        <parameter metaType="Expression" name="TENANT_ID" optional="false" type="&lt;rstring>"/>
        <inputPort name="HazardStream" portIndex="0" type="stream&lt;Hazard>"/>
      </compositeOp>
    </namespace>
    <dependency>
      <common:name>com.ibm.streamsx.inet</common:name>
      <common:version>2.1.0</common:version>
    </dependency>
    <dependency>
      <common:name>com.ibm.streamsx.messaging</common:name>
      <common:version>[5.3.0,6.0.0)</common:version>
    </dependency>
    <dependency>
      <common:name>com.ibm.streamsx.kafka</common:name>
      <common:version>[1.2.2,2.0.0)</common:version>
    </dependency>
    <sabFiles>
      <ti:include path="toolkit.xml" root="toolkitDir"/>
      <ti:include path="impl/java/lib/**" root="toolkitDir"/>
      <ti:include path="impl/java/bin/**" root="toolkitDir"/>
      <ti:include path="impl/bin/**" root="toolkitDir"/>
      <ti:include path="impl/lib/**" root="toolkitDir"/>
      <ti:include path="impl/nl/*.dat" root="toolkitDir"/>
      <ti:include path="etc/**" root="toolkitDir"/>
      <ti:include path="lib/**" root="toolkitDir"/>
      <ti:include path="nl/**" root="toolkitDir"/>
      <ti:include path="opt/**" root="toolkitDir"/>
    </sabFiles>
  </toolkit>

</toolkitModel>
